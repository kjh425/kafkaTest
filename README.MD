# Kafka Practice Project (Spring Boot + Docker Compose) ì¹´í”„ì¹´ ì‹¤ìŠµì˜ˆì œì…ë‹ˆë‹¤.

Spring Boot ê¸°ë°˜ Kafka ì‹¤ìŠµ ì˜ˆì œì…ë‹ˆë‹¤. Kafkaë¥¼ í†µí•´ ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ê³  ì†Œë¹„í•˜ëŠ” êµ¬ì¡°ë¥¼ ì‹¤ì œë¡œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì„±

<pre>
kafkaTest/
â”œâ”€â”€ A/  # Spring Boot App A (Producer)
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ build/libs/app-a.jar
â”œâ”€â”€ B/  # Spring Boot App B (Consumer)
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ build/libs/app-b.jar
â”œâ”€â”€ C/  # Spring Boot App C (Consumer)
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ build/libs/app-c.jar
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
</pre>

ê° í”„ë¡œì íŠ¸(A,B,C)ì— ë“¤ì–´ê°„ í›„
./gradlew build ë¡œ jarë¥¼ ë¨¼ì € ë§Œë“  í›„
composeë¥¼ ì´ìš©í•´ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì „ë¶€ í•œë²ˆì— ë„ì›€

(ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ë° ë³¼ë¥¨ ì œê±°)
docker-compose down -v --remove-orphans

(Docker ë³¼ë¥¨ ê°•ì œ ì‚­ì œ (ì£¼ì˜))
docker volume prune -f

( ì»¨í…Œì´ë„ˆ ì „ì²´ ì‹¤í–‰ (Kafka + App A/B/C) ymlì´ ìˆëŠ” ê²½ë¡œì—ì„œ)
docker-compose up --build -d

- Kafka (KRaft ëª¨ë“œ)
- Spring Boot ì•± 3ê°œ
  - `App A`: ë©”ì‹œì§€ ìƒì‚° (Producer)
  - `App B`, `App C`: ë©”ì‹œì§€ ì†Œë¹„ (Consumer)

## ì‹¤í–‰ ë°©ë²•

docker-compose up --build -d

## Kafka í† í”½ ìƒì„±

docker exec -it kafkatest-kafka-1 bash

# í† í”½ ìƒì„±

/opt/bitnami/kafka/bin/kafka-topics.sh --create \
 --topic user-topic \
 --bootstrap-server localhost:9092 \
 --partitions 1 \
 --replication-factor 1

# Producer ì‹¤í–‰

docker exec -it kafkatest-kafka-1 bash

ì»¨í…Œì´ë„ˆë¡œ ë“¤ì–´ê°„í›„ !!

/opt/bitnami/kafka/bin/kafka-console-producer.sh \
 --bootstrap-server localhost:9092 \
 --topic user-topic

# Consumer ì‹¤í–‰

docker exec -it kafkatest-kafka-1 bash

ì»¨í…Œì´ë„ˆë¡œ ë“¤ì–´ê°„í›„ !!

/opt/bitnami/kafka/bin/kafka-console-consumer.sh \
 --bootstrap-server localhost:9092 \
 --topic user-topic \
 --from-beginning

# test endPoint 8081í¬íŠ¸ /send

ìœ„ ìš”ì²­ì„ ë‚ ë¦¬ê²Œë˜ë©´ Bì™€ Cì—ì„œ user 50ëª…ì„ ë°›ì•„ ì°ì–´ë‚´ê²Œ ë©ë‹ˆë‹¤.

Producerì—ì„œ ë©”ì‹œì§€ ë‚ ë¦¬ë©´ ìˆœì°¨ë¡œ Consumerì—ì„œ ë°›ê²Œë¨. í„°ë¯¸ë„ì—ì„œ ì‹¤ì œë¡œ ë©”ì‹œì§€ ë°›ëŠ”ê±° í™•ì¸ê°€ëŠ¥í•œ í”„ë¡œì íŠ¸ ì‹¤ìŠµì…ë‹ˆë‹¤.
